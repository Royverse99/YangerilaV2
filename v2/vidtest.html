<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTube Carousel (No Loop)</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #111;
      color: #fff;
      font-family: Arial, sans-serif;
    }
    .swiper {
      width: 100%;
      max-width: 900px;
      height: 500px;
      margin: 50px auto;
    }
    .swiper-slide {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #000;
      flex-direction: column;
    }
    .video-card {
      width: 100%;
      height: 100%;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .video-card p {
      margin: 10px 0 0;
      font-size: 16px;
      color: #4fd1c7;
    }
    iframe {
      width: 100%;
      height: 400px;
      border: none;
    }
  </style>
</head>
<body>
  <!-- Swiper Container -->
  <div class="swiper">
    <div class="swiper-wrapper">
      <!-- Slide 1 -->
      <div class="swiper-slide">
        <div class="video-card" data-id="VIDEO_ID_1" onclick="play(this)">
          <div id="player-VIDEO_ID_1"></div>
          <p>Video 1 description</p>
        </div>
      </div>

      <!-- Slide 2 -->
      <div class="swiper-slide">
        <div class="video-card" data-id="VIDEO_ID_2" onclick="play(this)">
          <div id="player-VIDEO_ID_2"></div>
          <p>Video 2 description</p>
        </div>
      </div>

      <!-- Slide 3 -->
      <div class="swiper-slide">
        <div class="video-card" data-id="VIDEO_ID_3" onclick="play(this)">
          <div id="player-VIDEO_ID_3"></div>
          <p>Video 3 description</p>
        </div>
      </div>

      <!-- Add more slides as needed -->
    </div>

    <!-- Swiper Controls -->
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
    <div class="swiper-pagination"></div>
  </div>

  <!-- Swiper JS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

  <!-- YouTube API -->
  <script>
    const videoIDs = [
      
      'sBe411-F2GE','Pl9H9X1GoAc','lT_mlbMjcxo','hafoCeXWxAE',
      'AyJcLLYyJ9k','hgEjTeWc8C0','Anop2dCuR2g','umUAWqoxt-0'
      // add more IDs as needed
    ];

    let players = {};
    let currentPlayingId = null;

    const swiper = new Swiper(".swiper", {
      loop: false, // ðŸš« no duplicates
      autoplay: {
        delay: 5000,
        disableOnInteraction: false
      },
      slidesPerView: 1,
      spaceBetween: 10,
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev"
      },
      pagination: {
        el: ".swiper-pagination",
        clickable: true
      }
    });

    // Load YouTube API
    let tag = document.createElement("script");
    tag.src = "https://www.youtube.com/iframe_api";
    let firstScriptTag = document.getElementsByTagName("script")[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // Called by YouTube API
    function onYouTubeIframeAPIReady() {
      videoIDs.forEach((id) => {
        players[id] = new YT.Player(`player-${id}`, {
          videoId: id,
          playerVars: { rel: 0, modestbranding: 1 },
          events: {
            onStateChange: onPlayerStateChange
          }
        });
      });
    }

    // Handle play/pause state
    function onPlayerStateChange(event) {
      if (event.data === YT.PlayerState.PLAYING) {
        swiper.autoplay.stop();
        currentPlayingId = getIdFromPlayer(event.target);
      } else if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
        currentPlayingId = null;
        swiper.autoplay.start();
      }
    }

    function getIdFromPlayer(player) {
      return Object.keys(players).find((id) => players[id] === player) || null;
    }

    function stopVideo(id) {
      if (players[id]) {
        players[id].stopVideo();
      }
    }

    // Play function
    function play(card) {
      const id = card.dataset.id;

      swiper.autoplay.stop();

      if (currentPlayingId && currentPlayingId !== id) {
        stopVideo(currentPlayingId);
      }

      const idx = videoIDs.indexOf(id);
      swiper.slideTo(idx);

      setTimeout(() => {
        if (players[id] && typeof players[id].playVideo === "function") {
          players[id].playVideo();
          currentPlayingId = id;
        }
      }, 200);
    }
  </script>
</body>
</html>
