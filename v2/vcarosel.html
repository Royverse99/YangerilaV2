<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Guitar Solo YouTube Carousel</title>
  <style>
    /* Reset and container */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; height: 100%; overflow: hidden; background: #000; }
    .carousel { position: relative; width: 100vw; height: 100vh; display: flex; overflow: hidden; }
    .slide { min-width: 100%; height: 100%; flex-shrink: 0; display: flex; align-items: center; justify-content: center; background: #000; }
    .slide iframe { width: 100%; height: 100%; }

    /* Arrows */
    .arrow {
      position: absolute; top: 50%; transform: translateY(-50%);
      width: 50px; height: 50px; background: rgba(122,231,199,0.5);
      color: #000; font-size: 30px; line-height: 50px; text-align: center;
      border-radius: 50%; cursor: pointer; z-index: 10;
      transition: background 0.3s;
      user-select: none;
    }
    .arrow:hover { background: rgba(122,231,199,0.9); }
    #prev { left: 20px; }
    #next { right: 20px; }

    /* Dots */
    .dots { position: absolute; bottom: 20px; width: 100%; text-align: center; z-index: 10; }
    .dot {
      display: inline-block; width: 12px; height: 12px;
      margin: 0 6px; background: rgba(122,231,199,0.5);
      border-radius: 50%; cursor: pointer; transition: background 0.3s;
    }
    .dot.active { background: #7ae7c7; }

  </style>
</head>
<body>

  <div class="carousel" id="carousel">
    <div class="slide" id="player0" data-video-id="M4lsB-B1O7U"></div>
    <div class="slide" id="player1" data-video-id="AJ_WZ6My1pQ"></div>
    <div class="slide" id="player2" data-video-id="JMYRfVw0Wcs"></div>
    <div class="slide" id="player3" data-video-id="d_Yyrd_bDsQ"></div>
    <div class="slide" id="player4" data-video-id="sUgbYkiX2u8"></div>
  </div>

  <div id="prev" class="arrow">&#10094;</div>
  <div id="next" class="arrow">&#10095;</div>
  <div class="dots" id="dots"></div>

  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    let players = [];
    let current = 0;
    let autoplayTimer = null;
    let isPlaying = false;

    const carousel = document.getElementById('carousel');
    const slides = Array.from(document.querySelectorAll('.slide'));
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');
    const dotsContainer = document.getElementById('dots');

    // Create dots
    slides.forEach((_, i) => {
      const dot = document.createElement('div');
      dot.className = 'dot' + (i === 0 ? ' active' : '');
      dot.dataset.index = i;
      dot.addEventListener('click', () => goToSlide(i));
      dotsContainer.appendChild(dot);
    });
    const dots = Array.from(document.querySelectorAll('.dot'));

    // YouTube API ready
    function onYouTubeIframeAPIReady() {
      slides.forEach((slide, i) => {
        const id = slide.dataset.videoId;
        players[i] = new YT.Player(slide.id, {
          videoId: id,
          playerVars: { autoplay: 0, controls: 1, rel: 0, modestbranding: 1 },
          events: {
            onStateChange: e => onPlayerStateChange(e, i)
          }
        });
      });
      startAutoplay();
    }

    // Handle video play/pause
    function onPlayerStateChange(event, idx) {
      if (event.data === YT.PlayerState.PLAYING) {
        isPlaying = true;
        pauseAutoplay();
      } else if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
        isPlaying = false;
      }
    }

    // Move carousel
    function updateCarousel() {
      carousel.style.transform = `translateX(-${current * 100}vw)`;
      dots.forEach(d => d.classList.remove('active'));
      dots[current].classList.add('active');
    }

    function goToSlide(index) {
      current = index;
      pauseAllVideos();
      updateCarousel();
    }

    function prevSlide() {
      current = (current - 1 + slides.length) % slides.length;
      pauseAllVideos();
      updateCarousel();
      pauseAutoplay();
    }

    function nextSlide() {
      current = (current + 1) % slides.length;
      pauseAllVideos();
      updateCarousel();
      pauseAutoplay();
    }

    // Pause all except current
    function pauseAllVideos() {
      players.forEach((p, i) => { if (i !== current && p.pauseVideo) p.pauseVideo(); });
    }

    // Autoplay
    function startAutoplay() {
      autoplayTimer = setInterval(() => {
        if (!isPlaying) {
          current = (current + 1) % slides.length;
          pauseAllVideos();
          updateCarousel();
        }
      }, 5000);
    }

    function pauseAutoplay() {
      clearInterval(autoplayTimer);
    }

    // Event listeners
    prevBtn.addEventListener('click', prevSlide);
    nextBtn.addEventListener('click', nextSlide);

    // Initialize
    updateCarousel();
  </script>
</body>
</html>
