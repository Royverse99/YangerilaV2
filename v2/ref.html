<!DOCTYPE html>
<html lang="en-US" class="no-js ">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Student Referral - Yangerila Creative Studio</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: rgba(24, 47, 53, 0.25);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      color: #4fd1c7;
      font-family: 'Arial', sans-serif;
      width: 100%;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      margin: 0;
    }

    .form-container {
      background: rgba(24, 47, 53, 0.6);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(79, 209, 199, 0.3);
      border-radius: 16px;
      padding: 40px;
      max-width: 600px;
      width: 100%;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      color: #4fd1c7;
      text-align: center;
    }

    h1 {
      color: #4fd1c7;
      margin-bottom: 20px;
      font-weight: 600;
      font-size: 28px;
      text-align: center;
    }

    p.description {
      text-align: center;
      margin-bottom: 30px;
      font-size: 16px;
      color: rgba(79, 209, 199, 0.8);
      line-height: 1.5;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr;
      row-gap: 25px;
    }

    label {
      display: block;
      margin-bottom: 6px;
      color: #4fd1c7;
      font-weight: 500;
      font-size: 14px;
    }

    input {
      width: 100%;
      padding: 12px 16px;
      background: rgba(24, 47, 53, 0.8);
      border: 1px solid rgba(79, 209, 199, 0.4);
      border-radius: 8px;
      color: #4fd1c7;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    input:focus {
      outline: none;
      border-color: #4fd1c7;
      box-shadow: 0 0 0 3px rgba(79, 209, 199, 0.1);
      transform: scale(1.02);
    }

    input::placeholder {
      color: rgba(79, 209, 199, 0.6);
    }

    .submit-btn {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, #4fd1c7 0%, #38b2ac 100%);
      border: none;
      border-radius: 8px;
      color: #1a202c;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
      box-shadow: 0 0 25px rgba(79, 209, 199, 0.4);
      margin-top: 25px;
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(79, 209, 199, 0.6);
    }

    .submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .loading {
      display: none;
      color: rgba(79, 209, 199, 0.8);
      margin-top: 15px;
      font-size: 14px;
    }

    .error {
      display: none;
      color: #ff6b6b;
      margin-top: 15px;
      font-size: 14px;
      padding: 10px;
      background: rgba(255, 107, 107, 0.1);
      border-radius: 6px;
      border: 1px solid rgba(255, 107, 107, 0.3);
    }

    .thank-you {
      text-align: center;
      padding: 60px 20px;
      display: none;
      color: #4fd1c7;
    }

    .thank-you h2 {
      font-size: 32px;
      margin-bottom: 12px;
      font-weight: 400;
    }

    .thank-you p {
      font-size: 18px;
      line-height: 1.5;
      color: rgba(79, 209, 199, 0.8);
      margin-bottom: 24px;
    }

    .back-btn {
      background: rgba(79, 209, 199, 0.2);
      border: 1px solid #4fd1c7;
      color: #4fd1c7;
      padding: 12px 28px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .back-btn:hover {
      background: rgba(79, 209, 199, 0.3);
    }

    .setup-info {
      background: rgba(79, 209, 199, 0.1);
      border: 1px solid rgba(79, 209, 199, 0.3);
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
      font-size: 14px;
      line-height: 1.4;
    }

    .setup-info strong {
      color: #4fd1c7;
    }

    @media (max-width: 480px) {
      .form-container {
        padding: 30px 20px;
      }

      h1 {
        font-size: 24px;
      }

      .submit-btn {
        font-size: 14px;
        padding: 14px;
      }
    }
  </style>
</head>

<body>
  <div class="form-container">
    <h1>Referral Reward</h1>
    <p class="description">
      Know someone interested in learning guitar? Refer them to Yangerila Creative Studio for a free demo session. <br><strong>If they join,</strong> you’ll receive an Amazon gift card worth ₹1000 as our thank-you for spreading the word.
    </p>

    <form id="studentReferralForm">
      <div class="form-grid">
        <div class="form-group">
          <label for="yourName">Your Name *</label>
          <input type="text" id="yourName" name="yourName" placeholder="Enter your full name" required />
        </div>
        <div class="form-group">
          <label for="yourContact">Your Contact Number *</label>
          <input type="tel" id="yourContact" name="yourContact" placeholder="+91 98765 43210" required />
        </div>
        <div class="form-group">
          <label for="referredName">Referred Person's Name *</label>
          <input type="text" id="referredName" name="referredName" placeholder="Enter referred person's full name" required />
        </div>
        <div class="form-group">
          <label for="referredContact">Referred Person's Contact Number *</label>
          <input type="tel" id="referredContact" name="referredContact" placeholder="+91 98765 43210" required />
        </div>
      </div>
      <button type="submit" class="submit-btn" id="submitBtn">Submit Referral</button>
      <div class="loading" id="loading">Submitting your referral...</div>
      <div class="error" id="error">There was an error submitting your referral. Please try again.</div>
    </form>

    <div id="thankYouMessage" class="thank-you">
      <h2>Thank You!</h2>
      <p>Your student referral has been submitted successfully and saved to our records.<br />We appreciate you helping grow our Yangerila community.</p>
      <button class="back-btn" onclick="resetForm()">Submit Another Referral</button>
    </div>
  </div>

  <script>
    // Replace this with your latest Google Apps Script deployment URL (ending with /exec)
    const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzifq15DBPa5waruvR8R6HyyrA2FfYEBt2dX-GRenPDbfYvFUuNcZsX9Gx3SqpunvvoKQ/exec";

    // Helper: format timestamp to Indian time zone
    function getIndianTimestamp() {
      const date = new Date();
      const options = {
        timeZone: "Asia/Kolkata",
        day: "numeric",
        month: "long",
        year: "numeric",
        hour: "numeric",
        minute: "2-digit",
        hour12: true
      };
      const formatted = new Intl.DateTimeFormat("en-GB", options).format(date);

      const day = date.toLocaleString("en-IN", { day: "numeric", timeZone: "Asia/Kolkata" });
      const suffix = (d => {
        if (d > 3 && d < 21) return "th";
        switch (d % 10) {
          case 1: return "st";
          case 2: return "nd";
          case 3: return "rd";
          default: return "th";
        }
      })(parseInt(day));

      return formatted.replace(day, day + suffix);
    }

    document.getElementById("studentReferralForm").addEventListener("submit", async function (e) {
      e.preventDefault();

      const submitBtn = document.getElementById("submitBtn");
      const loading = document.getElementById("loading");
      const error = document.getElementById("error");
      const thankYou = document.getElementById("thankYouMessage");

      // Reset UI
      error.style.display = "none";
      thankYou.style.display = "none";

      // Disable submit while processing
      submitBtn.disabled = true;
      loading.style.display = "block";

      // Collect data
      const params = new URLSearchParams();
      params.append("yourName", document.getElementById("yourName").value);
      params.append("yourContact", document.getElementById("yourContact").value);
      params.append("referredName", document.getElementById("referredName").value);
      params.append("referredContact", document.getElementById("referredContact").value);
      params.append("timestamp", getIndianTimestamp());

      try {
        const response = await fetch(GOOGLE_SCRIPT_URL, {
          method: "POST",
          body: params
        });
        const result = await response.text();

        if (result.includes("Success") || response.ok) {
          // Hide heading, description, and form
          document.querySelector("h1").style.display = "none";
          document.querySelector(".description").style.display = "none";
          document.getElementById("studentReferralForm").style.display = "none";

          // Show thank you message only
          thankYou.style.display = "block";
          document.getElementById("studentReferralForm").reset();
        } else {
          throw new Error(result);
        }
      } catch (err) {
        console.error("Error submitting form:", err);
        error.style.display = "block";
      } finally {
        loading.style.display = "none";
        submitBtn.disabled = false;
      }
    });

    function resetForm() {
      // Bring everything back when "Submit Another Referral" is clicked
      document.querySelector("h1").style.display = "block";
      document.querySelector(".description").style.display = "block";
      document.getElementById("studentReferralForm").style.display = "block";
      document.getElementById("thankYouMessage").style.display = "none";
    }
  </script>
</body>

</html>
